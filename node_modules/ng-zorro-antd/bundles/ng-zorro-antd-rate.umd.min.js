!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/keycodes"),require("@angular/core"),require("@angular/forms"),require("ng-zorro-antd/core/config"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core/util"),require("@angular/common"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/tooltip")):"function"==typeof define&&define.amd?define("ng-zorro-antd/rate",["exports","@angular/cdk/keycodes","@angular/core","@angular/forms","ng-zorro-antd/core/config","rxjs","rxjs/operators","ng-zorro-antd/core/util","@angular/common","ng-zorro-antd/icon","ng-zorro-antd/tooltip"],e):e(((t=t||self)["ng-zorro-antd"]=t["ng-zorro-antd"]||{},t["ng-zorro-antd"].rate={}),t.ng.cdk.keycodes,t.ng.core,t.ng.forms,t["ng-zorro-antd"].core.config,t.rxjs,t.rxjs.operators,t["ng-zorro-antd"].core.util,t.ng.common,t["ng-zorro-antd"].icon,t["ng-zorro-antd"].tooltip)}(this,(function(t,e,n,o,r,a,i,s,l,u,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function p(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var f=function(){function t(t,e,o){this.nzConfigService=t,this.renderer=e,this.cdr=o,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new n.EventEmitter,this.nzOnFocus=new n.EventEmitter,this.nzOnHoverChange=new n.EventEmitter,this.nzOnKeyDown=new n.EventEmitter,this.classMap={},this.starArray=[],this.starStyleArray=[],this.destroy$=new a.Subject,this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.onChange=function(){return null},this.onTouched=function(){return null}}return Object.defineProperty(t.prototype,"nzValue",{get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,this.hasHalf=!Number.isInteger(t),this.hoverValue=Math.ceil(t))},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){var e=t.nzAutoFocus,n=t.nzCount,o=t.nzValue;if(e&&!e.isFirstChange()){var r=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(r,"autofocus","autofocus"):this.renderer.removeAttribute(r,"autofocus")}n&&this.updateStarArray(),o&&this.updateStarStyle()},t.prototype.ngOnInit=function(){var t=this;this.nzConfigService.getConfigChangeEventForComponent("rate").pipe(i.takeUntil(this.destroy$)).subscribe((function(){return t.cdr.markForCheck()}))},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.onItemClick=function(t,e){if(!this.nzDisabled){this.hoverValue=t+1;var n=e?t+.5:t+1;this.nzValue===n?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=n,this.onChange(this.nzValue)),this.updateStarStyle()}},t.prototype.onItemHover=function(t,e){this.nzDisabled||this.hoverValue===t+1&&e===this.hasHalf||(this.hoverValue=t+1,this.hasHalf=e,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())},t.prototype.onRateLeave=function(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()},t.prototype.onFocus=function(t){this.isFocused=!0,this.nzOnFocus.emit(t)},t.prototype.onBlur=function(t){this.isFocused=!1,this.nzOnBlur.emit(t)},t.prototype.focus=function(){this.ulElement.nativeElement.focus()},t.prototype.blur=function(){this.ulElement.nativeElement.blur()},t.prototype.onKeyDown=function(t){var n=this.nzValue;t.keyCode===e.RIGHT_ARROW&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:t.keyCode===e.LEFT_ARROW&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),n!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(t),this.updateStarStyle(),this.cdr.markForCheck())},t.prototype.updateStarArray=function(){this.starArray=Array(this.nzCount).fill(0).map((function(t,e){return e})),this.updateStarStyle()},t.prototype.updateStarStyle=function(){var t=this;this.starStyleArray=this.starArray.map((function(e){var n,o="ant-rate-star",r=e+1;return(n={})[o+"-full"]=r<t.hoverValue||!t.hasHalf&&r===t.hoverValue,n[o+"-half"]=t.hasHalf&&r===t.hoverValue,n[o+"-active"]=t.hasHalf&&r===t.hoverValue,n[o+"-zero"]=r>t.hoverValue,n[o+"-focused"]=t.hasHalf&&r===t.hoverValue&&t.isFocused,n}))},t.prototype.writeValue=function(t){this.nzValue=t||0,this.updateStarArray(),this.cdr.markForCheck()},t.prototype.setDisabledState=function(t){this.nzDisabled=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.decorators=[{type:n.Component,args:[{changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,selector:"nz-rate",exportAs:"nzRate",preserveWhitespaces:!1,template:'\n    <ul\n      #ulElement\n      class="ant-rate"\n      [class.ant-rate-disabled]="nzDisabled"\n      [ngClass]="classMap"\n      (blur)="onBlur($event)"\n      (focus)="onFocus($event)"\n      (keydown)="onKeyDown($event); $event.preventDefault()"\n      (mouseleave)="onRateLeave(); $event.stopPropagation()"\n      [tabindex]="nzDisabled ? -1 : 1"\n    >\n      <li\n        *ngFor="let star of starArray; let i = index"\n        class="ant-rate-star"\n        [ngClass]="starStyleArray[i]"\n        nz-tooltip\n        [nzTooltipTitle]="nzTooltips[i]"\n      >\n        <div\n          nz-rate-item\n          [allowHalf]="nzAllowHalf"\n          [character]="nzCharacter"\n          (itemHover)="onItemHover(i, $event)"\n          (itemClick)="onItemClick(i, $event)"\n        ></div>\n      </li>\n    </ul>\n  ',providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return t})),multi:!0}]}]}],t.ctorParameters=function(){return[{type:r.NzConfigService},{type:n.Renderer2},{type:n.ChangeDetectorRef}]},t.propDecorators={ulElement:[{type:n.ViewChild,args:["ulElement",{static:!1}]}],nzAllowClear:[{type:n.Input}],nzAllowHalf:[{type:n.Input}],nzDisabled:[{type:n.Input}],nzAutoFocus:[{type:n.Input}],nzCharacter:[{type:n.Input}],nzCount:[{type:n.Input}],nzTooltips:[{type:n.Input}],nzOnBlur:[{type:n.Output}],nzOnFocus:[{type:n.Output}],nzOnHoverChange:[{type:n.Output}],nzOnKeyDown:[{type:n.Output}]},p([r.WithConfig("rate",!0),s.InputBoolean(),h("design:type",Boolean)],t.prototype,"nzAllowClear",void 0),p([r.WithConfig("rate",!1),s.InputBoolean(),h("design:type",Boolean)],t.prototype,"nzAllowHalf",void 0),p([s.InputBoolean(),h("design:type",Boolean)],t.prototype,"nzDisabled",void 0),p([s.InputBoolean(),h("design:type",Boolean)],t.prototype,"nzAutoFocus",void 0),p([s.InputNumber(),h("design:type",Number)],t.prototype,"nzCount",void 0),t}();var d=function(){function t(){this.allowHalf=!1,this.itemHover=new n.EventEmitter,this.itemClick=new n.EventEmitter}return t.prototype.hoverRate=function(t){this.itemHover.next(t&&this.allowHalf)},t.prototype.clickRate=function(t){this.itemClick.next(t&&this.allowHalf)},t.decorators=[{type:n.Component,args:[{changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,selector:"[nz-rate-item]",exportAs:"nzRateItem",template:'\n    <div class="ant-rate-star-second" (mouseover)="hoverRate(false); $event.stopPropagation()" (click)="clickRate(false)">\n      <ng-template [ngTemplateOutlet]="character || defaultCharacter"></ng-template>\n    </div>\n    <div class="ant-rate-star-first" (mouseover)="hoverRate(true); $event.stopPropagation()" (click)="clickRate(true)">\n      <ng-template [ngTemplateOutlet]="character || defaultCharacter"></ng-template>\n    </div>\n\n    <ng-template #defaultCharacter>\n      <i nz-icon nzType="star" nzTheme="fill"></i>\n    </ng-template>\n  '}]}],t.propDecorators={character:[{type:n.Input}],allowHalf:[{type:n.Input}],itemHover:[{type:n.Output}],itemClick:[{type:n.Output}]},p([s.InputBoolean(),h("design:type",Boolean)],t.prototype,"allowHalf",void 0),t}();var y=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{exports:[f],declarations:[f,d],imports:[l.CommonModule,u.NzIconModule,c.NzToolTipModule]}]}],t}();t.NzRateComponent=f,t.NzRateItemComponent=d,t.NzRateModule=y,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-rate.umd.min.js.map